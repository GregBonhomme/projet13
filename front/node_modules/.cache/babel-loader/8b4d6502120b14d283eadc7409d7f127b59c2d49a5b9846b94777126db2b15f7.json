{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nfunction useToken(token) {\n  _s();\n  const [profile, setProfile] = useState(null);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch(\"http://localhost:3001/api/v1/user/profile\", {\n          method: \"POST\",\n          headers: {\n            \"content-type\": \"application/json; charset=utf-8\",\n            \"Authorization\": \"Bearer \" + token\n          }\n        });\n        const profileData = await response.json();\n        if (profileData.status === 200) {\n          const userData = await profileData.body;\n          setProfile(userData);\n        } else {\n          return \"Invalid token\";\n        }\n      } catch (error) {\n        console.error(\"An error occured\", error);\n      }\n    };\n    token && fetchData();\n  }, []);\n  return profile.length > 0 && profile;\n}\n_s(useToken, \"3r0GXfTm3xFxxZ+oi76IZdvQXmQ=\");\nexport default useToken;","map":{"version":3,"names":["useState","useEffect","useToken","token","_s","profile","setProfile","fetchData","response","fetch","method","headers","profileData","json","status","userData","body","error","console","length"],"sources":["C:/Users/grego/Documents/temp/OpenClassroom/projet13/front/src/utils/useToken/index.js"],"sourcesContent":["import { useState,useEffect } from \"react\"\r\n\r\nfunction useToken (token) {\r\n\r\n    const [profile,setProfile] = useState(null)\r\n\r\n    useEffect (() => {\r\n        const fetchData = async() => {\r\n            try {\r\n                const response = await fetch(\"http://localhost:3001/api/v1/user/profile\",{\r\n                    method:\"POST\",\r\n                    headers:{\r\n                        \"content-type\":\"application/json; charset=utf-8\",\r\n                        \"Authorization\":\"Bearer \" + token\r\n                        }\r\n                    })\r\n                const profileData = await response.json()\r\n                \r\n                if (profileData.status === 200) {\r\n                    const userData = await profileData.body\r\n                    setProfile(userData)\r\n                } else {\r\n                    return \"Invalid token\"\r\n                }\r\n            } catch (error) {\r\n                console.error(\"An error occured\",error)\r\n            }\r\n        }\r\n        token && fetchData()\r\n    },[])\r\n\r\n    return (profile.length > 0) && profile\r\n}\r\n\r\nexport default useToken"],"mappings":";AAAA,SAASA,QAAQ,EAACC,SAAS,QAAQ,OAAO;AAE1C,SAASC,QAAQA,CAAEC,KAAK,EAAE;EAAAC,EAAA;EAEtB,MAAM,CAACC,OAAO,EAACC,UAAU,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EAE3CC,SAAS,CAAE,MAAM;IACb,MAAMM,SAAS,GAAG,MAAAA,CAAA,KAAW;MACzB,IAAI;QACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,2CAA2C,EAAC;UACrEC,MAAM,EAAC,MAAM;UACbC,OAAO,EAAC;YACJ,cAAc,EAAC,iCAAiC;YAChD,eAAe,EAAC,SAAS,GAAGR;UAC5B;QACJ,CAAC,CAAC;QACN,MAAMS,WAAW,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;QAEzC,IAAID,WAAW,CAACE,MAAM,KAAK,GAAG,EAAE;UAC5B,MAAMC,QAAQ,GAAG,MAAMH,WAAW,CAACI,IAAI;UACvCV,UAAU,CAACS,QAAQ,CAAC;QACxB,CAAC,MAAM;UACH,OAAO,eAAe;QAC1B;MACJ,CAAC,CAAC,OAAOE,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAAC,kBAAkB,EAACA,KAAK,CAAC;MAC3C;IACJ,CAAC;IACDd,KAAK,IAAII,SAAS,CAAC,CAAC;EACxB,CAAC,EAAC,EAAE,CAAC;EAEL,OAAQF,OAAO,CAACc,MAAM,GAAG,CAAC,IAAKd,OAAO;AAC1C;AAACD,EAAA,CA9BQF,QAAQ;AAgCjB,eAAeA,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}